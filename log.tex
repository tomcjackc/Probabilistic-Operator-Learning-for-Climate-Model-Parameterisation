% LaTeX template for Models of Computation assessed coursework
% Most of the required packages are standard and should be provided by most TeX installations
% The exception is mathpartir, which is provided alongside this document

\documentclass[11pt,a4paper]{article}

\usepackage{fullpage}
\usepackage{rotating}
\usepackage{amsmath, amssymb, amsthm}
\usepackage{stmaryrd}
\usepackage{proof}
% \usepackage{mathpartir}
\usepackage{tikz}
\usepackage{verbatim}
\usepackage{url}
\usepackage{multicol}
\usepackage{xr-hyper}

% Common macros

% BNF notation
\newcommand{\Gdef}{\mathrel{\mathop{::}}=}
\newcommand{\Gbar}{\mathbin{\ \big|\ }}
\newcommand{\Coloneqq}{\Gdef}

% Big-step arrow
\newcommand{\bigstep}{\mathrel{\Downarrow}}

% Semantic operators are (often) underlined to avoid ambiguity
\newcommand{\semop}[1]{\mathbin{\underline{#1}}}


% Program syntax is set in teletype using the \cmd macro
\newcommand{\cmd}[1]{\texttt{#1}}

% Macros for program constructs
\newcommand{\ifthen}[3]{
  \cmd{if} \; #1 \; \cmd{then} \; #2 \; \cmd{else} \; #3 }
\newcommand{\while}[2]{
  \cmd{while} \; #1 \; \cmd{do} \; #2 }

% \ang{x} typesets x in angled brackets
% \newcommand{\ang}[1]{\langle #1 \rangle}

% The following two macros are for typesetting rules and derivations
% Usage: \drule{rule name}{premise1 \\ premise2 \\ premise3 ...}{conclusion}
% The premises will often also be derivations using \drule.
% The difference between \drule and and \Drule is that the space for the rule name
% is not measured with \Drule.  This is useful for typesetting left-most subderivations.
\newcommand{\drule}[3]{\inferrule*[left={#1}]{#2}{#3}}
\newcommand{\Drule}[3]{\inferrule*[Left={#1}]{#2}{#3}}

% For defininitions
\newcommand{\eqdef}{\triangleq}


% WhileDM
\newcommand{\whiledm}{\textsc{WhileDM}}
% Names of types
\newcommand{\tname}[1]{\mathit{#1}}
\newcommand{\exprs}{\tname{Expr}}
\newcommand{\bools}{\tname{Bool}}
\newcommand{\comms}{\tname{Comm}}
\newcommand{\vars}{\tname{Var}}
\newcommand{\nums}{\tname{Num}}
\newcommand{\addrs}{\tname{Addr}}
\newcommand{\vals}{\tname{Val}}
\newcommand{\stor}{\tname{Store}}
\newcommand{\heap}{\tname{Heap}}
\newcommand{\bv}{\tname{BVal}}
% \newcommand{\ad}[1]{\ulcorner {#1} \urcorner}
\newcommand{\newp}{\texttt{newpair}}
\newcommand{\fst}[1]{{#1}.\texttt{fst}}
\newcommand{\snd}[1]{{#1}.\texttt{snd}}
% \newcommand{\stof}[2]{\texttt{fst} [ {#1} ] \leftarrow {#2}}
% \newcommand{\stos}[2]{\texttt{snd} [ {#1} ] \leftarrow {#2}}
% \newcommand{\dom}[1]{\mathrm{dom}(#1)}
\newcommand{\bse}{\bigstep_e}
\newcommand{\bsc}{\bigstep_c}
\newcommand{\bsb}{\bigstep_b}
\newcommand{\types}{\tname{Type}}
\newcommand{\typ}{\tau} % Type variable
\newcommand{\tc}{\Gamma} % Type context
\newcommand{\tnat}{\mathsf{nat}}
\newcommand{\tpair}[2]{(#1,#2)}
% \newcommand{\hptyp}[3]{#1 \Vdash #2 : #3}
% \newcommand{\tcompat}[3]{#1 ; #2 ; #3 \vdash \textsf{\textup{well-typed}}}
% \newcommand{\etyp}[3]{#1 \vdash #2 : #3}


\begin{document}
\title{MRes Log}
\author{T. Cowperthwaite}

\maketitle

\section{09/05/24}

reproduced result sent to Henry on the 7th, although with less strict constraints on kernel and likelihood params. 
result was slightly worse, with test rel L2 = 24\%, with more PCA components being overfit.
unsure of the reason for this, but the values barely move from their initialisation, so maybe an issue with the optimiser?
weird structure in the std is less visible now.

ran the experiment again (n = m = 45, ARD false, multi true, stand true) with the same param constraints (1e-3\textless ls\textless10, 1e-3\textless var\textless 10, 1e-3\textless obs noise), but with initialisations at 2.0 rather than 1.0, on the off-chance that this happens to be a local minimum in some dimensions (maybe due to standardisation?).
there was no overfitting, all components were fit fairly well. 
MLL $\sim$-500.
Test rel L2 = 10\%, visually very good.

Investigating the spatial structure of the PCA components to attempt to explain the structure observed in the std.
the diagonal bands observed in std match the pattern of the PCA14, which was the component of the PCA that was overfit in the first experiment.

Ran experiment with initial values of var and ls = 2.0, obs noise = 1.0, ARD = false, multi = true, stand = true, n = 45, m = 5, although with lengthscale constraint of 1e-3\textless ls\textless20.
MLL values $\sim$-1500, looking promising that this could improve results, obs noise values sticking to lower limit as previously.

Ran same experiment again, this time with upper limit on lengthscale increased to 30.
MLL values $\sim$-1900 now, with obs noise values sticking to lower limit as previously.

Ran same experiment again, this time with upper limit on lengthscale removed.
MLL values $\sim$-2200 now, with obs noise values sticking to lower limit as previously.
Lengthscales selected for the 5 components tested $\sim$60.

Commit 72afcc2.

Looking more at the PCA acting on x and y separately.
for most components, the PCA is generating very similar PCs, but for some components, the PCs are very different, seemingly in antiphase in some cases (including PC14 which was problematic earlier).
This motivates use of a single PCA for both x and y? 
Perhaps using a single PCA for both x and y would allow the model to learn the spatial structure of the data better, as it would be able to learn the spatial structure of the data in both spaces simultaneously, rather than independently, and might make the latent spaces more compatible.
A simple data concatenation could work.

Commit 4431bf9.

Ran full experiment again, with lengthscale constraint of 1e-3\textless ls, and initial values of var and ls = 2.0, obs noise = 1.0, ARD = false, multi = true, stand = true, n = 45, m = 45.
there was no overfitting, all components were fit fairly well. 
MLL ranging from $\sim$-2300 \- $\sim$0.
Test rel L2 = 7.6\%, visually very good.
Lengthscales selected ranged from $\sim$60 for the first few components, to $\sim$20 for the last few.

Commit 96921a5.



\end{document}